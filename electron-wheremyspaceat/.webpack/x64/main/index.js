/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={167:e=>{"use strict";e.exports=require("worker_threads")},288:e=>{"use strict";e.exports=require("electron")},317:e=>{"use strict";e.exports=require("child_process")},857:e=>{"use strict";e.exports=require("os")},896:e=>{"use strict";e.exports=require("fs")},924:e=>{"use strict";e.exports=require("electron-squirrel-startup")},928:e=>{"use strict";e.exports=require("path")}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var o=r[t]={exports:{}};return e[t](o,o.exports,n),o.exports}function t(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return a(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw s}}}}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}function o(){var e,r,n="function"==typeof Symbol?Symbol:{},t=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,t,a,o){var i=t&&t.prototype instanceof u?t:u,l=Object.create(i.prototype);return s(l,"_invoke",function(n,t,a){var o,s,i,u=0,l=a||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(r,n){return o=r,s=0,i=e,f.n=n,c}};function d(n,t){for(s=n,i=t,r=0;!p&&u&&!a&&r<l.length;r++){var a,o=l[r],d=f.p,m=o[2];n>3?(a=m===t)&&(i=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=d&&((a=n<2&&d<o[1])?(s=0,f.v=t,f.n=o[1]):d<m&&(a=n<3||o[0]>t||t>m)&&(o[4]=n,o[5]=t,f.n=m,s=0))}if(a||n>1)return c;throw p=!0,t}return function(a,l,m){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,m),s=l,i=m;(r=s<2?e:i)||!p;){o||(s?s<3?(s>1&&(f.n=-1),d(s,i)):f.n=i:f.v=i);try{if(u=2,o){if(s||(a="next"),r=o[a]){if(!(r=r.call(o,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,s<2&&(s=0)}else 1===s&&(r=o.return)&&r.call(o),s<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((r=(p=f.n<0)?i:n.call(t,f))!==c)break}catch(r){o=e,s=1,i=r}finally{u=1}}return{value:r,done:p}}}(n,a,o),!0),l}var c={};function u(){}function l(){}function p(){}r=Object.getPrototypeOf;var f=[][t]?r(r([][t]())):(s(r={},t,function(){return this}),r),d=p.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=p,s(d,"constructor",p),s(p,"constructor",l),l.displayName="GeneratorFunction",s(p,a,"GeneratorFunction"),s(d),s(d,a,"Generator"),s(d,t,function(){return this}),s(d,"toString",function(){return"[object Generator]"}),(o=function(){return{w:i,m}})()}function s(e,r,n,t){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}s=function(e,r,n,t){if(r)a?a(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n;else{var o=function(r,n){s(e,r,function(e){return this._invoke(r,n,e)})};o("next",0),o("throw",1),o("return",2)}},s(e,r,n,t)}function i(e,r,n,t,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?r(c):Promise.resolve(c).then(t,a)}function c(e){return function(){var r=this,n=arguments;return new Promise(function(t,a){var o=e.apply(r,n);function s(e){i(o,t,a,s,c,"next",e)}function c(e){i(o,t,a,s,c,"throw",e)}s(void 0)})}}var u,l=n(288),p=l.app,f=l.BrowserWindow,d=l.ipcMain,m=l.dialog,h=l.Menu,v=n(928),w=n(896).promises,b=n(167).Worker,g=n(857);n(288).shell,n(924)&&p.quit();var y=null;function k(){u=new f({width:1400,height:900,minWidth:1200,minHeight:700,webPreferences:{nodeIntegration:!1,contextIsolation:!0,preload:void 0!==require("path").resolve(__dirname,"../renderer","main_window","preload.js")?require("path").resolve(__dirname,"../renderer","main_window","preload.js"):v.join(__dirname,"../../workers/preload.js")},backgroundColor:"#1a1a2e",show:!1,titleBarStyle:"hiddenInset",vibrancy:"dark"});var e=void 0!==`file://${require("path").resolve(__dirname,"..","renderer","main_window","index.html")}`?`file://${require("path").resolve(__dirname,"..","renderer","main_window","index.html")}`:v.join(__dirname,"../../dist/index.html");e.startsWith("http")?u.loadURL(e):u.loadFile(e),u.once("ready-to-show",function(){u.show()}),u.on("closed",function(){u=null,y&&(y.terminate(),y=null)}),h.setApplicationMenu(null)}p.isPackaged,p.whenReady().then(k),p.on("window-all-closed",function(){"darwin"!==process.platform&&p.quit()}),p.on("activate",function(){0===f.getAllWindows().length&&k()}),d.handle("select-folder",c(o().m(function e(){var r;return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m.showOpenDialog(u,{properties:["openDirectory"],title:"Sélectionner un dossier à analyser"});case 1:if((r=e.v).canceled){e.n=2;break}return e.a(2,r.filePaths[0]);case 2:return e.a(2,null)}},e)}))),d.handle("get-drives",c(o().m(function e(){var r,n,a,s,i,c,u,l,p,f,d,m,h,b,y,k,S,j,x,_;return o().w(function(e){for(;;)switch(e.n){case 0:if(r=[],"win32"!==process.platform){e.n=17;break}n=65;case 1:if(!(n<=90)){e.n=7;break}return a=String.fromCharCode(n)+":\\",e.p=2,e.n=3,w.access(a);case 3:return e.n=4,w.stat(a);case 4:e.v,r.push({path:a,name:"Disque ".concat(String.fromCharCode(n),":"),type:"drive",totalSize:null,freeSpace:null,platform:"windows"}),e.n=6;break;case 5:e.p=5,e.v;case 6:n++,e.n=1;break;case 7:return e.p=7,s=g.homedir(),e.n=8,w.stat(s);case 8:e.v,r.push({path:s,name:"Dossier utilisateur (".concat(v.basename(s),")"),type:"folder",totalSize:null,freeSpace:null,platform:"windows"}),i=0,c=[{folder:"Documents",name:"Documents"},{folder:"Downloads",name:"Téléchargements"},{folder:"Pictures",name:"Images"},{folder:"Videos",name:"Vidéos"},{folder:"Music",name:"Musique"}];case 9:if(!(i<c.length)){e.n=14;break}return u=c[i],l=u.folder,p=u.name,f=v.join(s,l),e.p=10,e.n=11,w.access(f);case 11:r.push({path:f,name:"".concat(p),type:"folder",totalSize:null,freeSpace:null,platform:"windows"}),e.n=13;break;case 12:e.p=12,e.v;case 13:i++,e.n=9;break;case 14:e.n=16;break;case 15:e.p=15,e.v;case 16:e.n=39;break;case 17:return e.p=17,e.n=18,w.stat("/");case 18:e.v,r.push({path:"/",name:"Racine système (/)",type:"drive",totalSize:null,freeSpace:null,platform:process.platform}),e.n=20;break;case 19:e.p=19,e.v;case 20:return e.p=20,d=g.homedir(),e.n=21,w.stat(d);case 21:e.v,r.push({path:d,name:"Dossier utilisateur (".concat(v.basename(d),")"),type:"folder",totalSize:null,freeSpace:null,platform:process.platform}),e.n=23;break;case 22:e.p=22,e.v;case 23:m=0,h=["/mnt","/media","/Volumes"];case 24:if(!(m<h.length)){e.n=39;break}return b=h[m],e.p=25,e.n=26,w.readdir(b);case 26:y=e.v,k=t(y),e.p=27,k.s();case 28:if((S=k.n()).done){e.n=33;break}return j=S.value,x=v.join(b,j),e.p=29,e.n=30,w.stat(x);case 30:e.v.isDirectory()&&r.push({path:x,name:"".concat(j," (").concat(b,")"),type:"mount",totalSize:null,freeSpace:null,platform:process.platform}),e.n=32;break;case 31:e.p=31,e.v;case 32:e.n=28;break;case 33:e.n=35;break;case 34:e.p=34,_=e.v,k.e(_);case 35:return e.p=35,k.f(),e.f(35);case 36:e.n=38;break;case 37:e.p=37,e.v;case 38:m++,e.n=24;break;case 39:return e.a(2,r)}},e,null,[[29,31],[27,34,35,36],[25,37],[20,22],[17,19],[10,12],[7,15],[2,5]])}))),d.handle("prescan-drives",c(o().m(function e(){var r,n,a,s,i,c,u,l,p,f,d,m,h,b,y,k,S,j,x,_,q,C,P,z;return o().w(function(e){for(;;)switch(e.n){case 0:if(console.log("Starting drive prescan..."),r=[],"win32"!==process.platform){e.n=17;break}n=65;case 1:if(!(n<=90)){e.n=16;break}return a=String.fromCharCode(n)+":\\",e.p=2,e.n=3,w.access(a);case 3:return s=0,i=0,e.p=4,e.n=5,w.readdir(a);case 5:c=e.v,s=c.length,u=0;case 6:if(!(u<Math.min(5,c.length))){e.n=11;break}return e.p=7,l=v.join(a,c[u]),e.n=8,w.stat(l);case 8:(p=e.v).isFile()&&(i+=p.size),e.n=10;break;case 9:e.p=9,e.v;case 10:u++,e.n=6;break;case 11:e.n=13;break;case 12:e.p=12,e.v;case 13:r.push({path:a,name:"Disque ".concat(String.fromCharCode(n),":"),type:"drive",estimatedItems:s,estimatedSize:i,platform:"windows",accessible:!0}),e.n=15;break;case 14:e.p=14,e.v,r.push({path:a,name:"Disque ".concat(String.fromCharCode(n),": (non accessible)"),type:"drive",estimatedItems:0,estimatedSize:0,platform:"windows",accessible:!1});case 15:n++,e.n=1;break;case 16:e.n=37;break;case 17:return f=[{path:"/",name:"Racine système (/)"},{path:g.homedir(),name:"Dossier utilisateur (".concat(v.basename(g.homedir()),")")}],e.p=18,e.n=19,w.readdir("/Volumes");case 19:d=e.v,m=t(d);try{for(m.s();!(h=m.n()).done;)b=h.value,y=v.join("/Volumes",b),f.push({path:y,name:"".concat(b," (/Volumes)")})}catch(e){m.e(e)}finally{m.f()}e.n=21;break;case 20:e.p=20,e.v;case 21:k=0,S=f;case 22:if(!(k<S.length)){e.n=37;break}return j=S[k],e.p=23,e.n=24,w.access(j.path);case 24:return x=0,_=0,e.p=25,e.n=26,w.readdir(j.path);case 26:q=e.v,x=q.length,C=0;case 27:if(!(C<Math.min(5,q.length))){e.n=32;break}return e.p=28,P=v.join(j.path,q[C]),e.n=29,w.stat(P);case 29:(z=e.v).isFile()&&(_+=z.size),e.n=31;break;case 30:e.p=30,e.v;case 31:C++,e.n=27;break;case 32:e.n=34;break;case 33:e.p=33,e.v;case 34:r.push({path:j.path,name:j.name,type:"/"===j.path?"drive":"mount",estimatedItems:x,estimatedSize:_,platform:process.platform,accessible:!0}),e.n=36;break;case 35:e.p=35,e.v,r.push({path:j.path,name:"".concat(j.name," (non accessible)"),type:"/"===j.path?"drive":"mount",estimatedItems:0,estimatedSize:0,platform:process.platform,accessible:!1});case 36:k++,e.n=22;break;case 37:return console.log("Drive prescan completed. Found ".concat(r.length," drives.")),e.a(2,r)}},e,null,[[28,30],[25,33],[23,35],[18,20],[7,9],[4,12],[2,14]])}))),d.handle("start-scan",function(){var e=c(o().m(function e(r,n,t){return o().w(function(e){for(;;)if(0===e.n)return console.log("Starting scan: ".concat(n," (").concat(t,")")),e.a(2,new Promise(function(e,r){y&&y.terminate();var a=p.isPackaged?v.join(process.resourcesPath,"workers","scanner.js"):v.join(__dirname,"..","..","workers","scanner.js");(y=new b(a,{workerData:{targetPath:n,scanType:t}})).on("message",function(n){"progress"===n.type?u.webContents.send("scan-progress",n):"complete"===n.type?(console.log("Scan completed successfully"),e({result:n.result,stats:n.stats}),y=null):"error"===n.type?(console.error("Scan error:",n.message),r(new Error(n.message)),y=null):"log"===n.type&&u.webContents.send("scan-log",n)}),y.on("error",function(e){console.error("Worker error:",e),r(e),y=null})}))},e)}));return function(r,n,t){return e.apply(this,arguments)}}()),d.handle("stop-scan",c(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:if(!y){e.n=1;break}return y.terminate(),y=null,e.a(2,!0);case 1:return e.a(2,!1)}},e)}))),d.handle("scan-cleanup-items",c(o().m(function e(){return o().w(function(e){for(;;)if(0===e.n)return e.a(2,[{id:"temp",name:"Fichiers temporaires",description:"Fichiers %temp%, cache navigateur, logs temporaires",size:2469396480,fileCount:4567,type:"temp",progress:75},{id:"duplicates",name:"Fichiers en double",description:"Copies identiques de fichiers existants",size:1932735283,fileCount:892,type:"duplicates",progress:45},{id:"trash",name:"Corbeille",description:"Fichiers supprimés mais non définitivement effacés",size:897581056,fileCount:234,type:"trash",progress:30},{id:"old-downloads",name:"Anciens téléchargements",description:"Fichiers téléchargés il y a plus de 30 jours",size:3435973837,fileCount:156,type:"old-downloads",progress:60}])},e)}))),d.handle("cleanup-files",function(){var e=c(o().m(function e(r,n){return o().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e){setTimeout(function(){e({success:!0,freedSpace:n.reduce(function(e,r){return e+r.size},0),cleanedFiles:n.reduce(function(e,r){return e+r.fileCount},0)})},3e3)}))},e)}));return function(r,n){return e.apply(this,arguments)}}()),d.handle("relaunch-as-admin",c(o().m(function e(){var r,t,a,s,i,c,u,l,f,d;return o().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,"win32"!==process.platform){e.n=1;break}return r=n(317),t=r.spawn,a=process.execPath,t("powershell",["Start-Process",'"'.concat(a,'"'),"-Verb","RunAs"],{detached:!0,stdio:"ignore"}),p.quit(),e.a(2,{success:!0});case 1:if("darwin"!==process.platform){e.n=2;break}return s=n(317),i=s.spawn,c=process.execPath,i("osascript",["-e",'do shell script "'.concat(c,'" with administrator privileges')],{detached:!0,stdio:"ignore"}),p.quit(),e.a(2,{success:!0});case 2:u=n(317),l=u.spawn,f=process.execPath;try{l("pkexec",[f],{detached:!0,stdio:"ignore"})}catch(e){l("sudo",[f],{detached:!0,stdio:"ignore"})}return p.quit(),e.a(2,{success:!0});case 3:e.n=5;break;case 4:return e.p=4,d=e.v,console.error("Failed to relaunch as admin:",d),e.a(2,{success:!1,error:d.message});case 5:return e.a(2)}},e,null,[[0,4]])}))),d.handle("check-admin-privileges",c(o().m(function e(){var r,t,a,s;return o().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,"win32"!==process.platform){e.n=1;break}return r=n(317),t=r.exec,e.a(2,new Promise(function(e){t("net session >nul 2>&1",function(r){e({isAdmin:!r,platform:"windows"})})}));case 1:return a=process.getuid&&0===process.getuid(),e.a(2,{isAdmin:a,platform:process.platform});case 2:e.n=4;break;case 3:return e.p=3,s=e.v,e.a(2,{isAdmin:!1,platform:process.platform,error:s.message});case 4:return e.a(2)}},e,null,[[0,3]])}))),module.exports={}})();
//# sourceMappingURL=index.js.map